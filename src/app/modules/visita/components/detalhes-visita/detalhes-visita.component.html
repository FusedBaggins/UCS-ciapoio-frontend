<ng-container *ngIf="entidade$ | async as entidade">
  <form [formGroup]="form" (ngSubmit)="onSubmit()" class="full-size" fxLayout="column" fxLayoutGap="16px" fxFlexFill>
    <h2 class="mat-headline-6">Informações iniciais</h2>

    <app-select-prestador [selectedPrestador]="prestadorSelecionadoControl.value"
      (selectedPrestadorChange)="atualizarPrestadorSelecionado($event)">
    </app-select-prestador>
    <div  fxLayout="row" fxLayout.xs="column" fxLayoutGap="16px">
      <app-select-instituicao-parceira [selectedInstituicao]="instituicaoSelecionadaControl.value" fxFlex="70" fxFlex.xs="100"
        (selectedInstituicaoChange)="atualizarInstituicaoSelecionada($event)">
      </app-select-instituicao-parceira>
      <div  fxFlex="30" fxFlex.xs="100">
        <mat-form-field appearance="fill" class="w-1">
          <mat-label>Prazo de aceite</mat-label>
          <input matInput [matDatepicker]="prazoAceitePicker" formControlName="prazoAceite">
          <mat-datepicker-toggle matIconSuffix [for]="prazoAceitePicker"></mat-datepicker-toggle>
          <mat-datepicker #prazoAceitePicker></mat-datepicker>
        </mat-form-field>
      </div>
    </div>
    <mat-form-field appearance="fill">
      <mat-label>Observação</mat-label>
      <input matInput placeholder="" formControlName="observacao">
    </mat-form-field>

    <h2 class="mat-headline-6">Situação</h2>

      <mat-form-field appearance="fill">
        <mat-label>Data de visita</mat-label>
        <input matInput [matDatepicker]="dataVisitaPicker" formControlName="prazoAceite">
        <mat-datepicker-toggle matIconSuffix [for]="dataVisitaPicker"></mat-datepicker-toggle>
        <mat-datepicker #dataVisitaPicker></mat-datepicker>
      </mat-form-field>

      <app-select-situacao-visita [selectedSituacao]="situacaoSelecionadaControl.value" 
        (selectedSituacaoChange)="atualizarSituacaoSelecionada($event)">
      </app-select-situacao-visita>

    <mat-form-field appearance="fill" *ngIf="form.controls['status'].value === 1">
      <mat-label>Motivo de reprovação</mat-label>
      <input matInput placeholder="" formControlName="motivoReprovacao">
    </mat-form-field>

    <div class="row fab-button">
      <button mat-fab type="submit" color="primary" aria-label="Submit button">
        <mat-icon>add</mat-icon>
      </button>
    </div>
  </form>
</ng-container>